$schema: "https://json-schema.org/draft/2020-12/schema"
title: EventTimeline
type: object
properties:
  events:
    type: object
    description: "Liste des événements indexés par timecode (string représentant un nombre)"
    patternProperties:
      "^[0-9]+$":
        type: array
        description: "Liste des événements à exécuter pour ce timecode"
        items:
          type: object
          required: [type]
          properties:
            type:
              type: string
              enum: [Pause, Flyto, Message]
            data:
              type: object
              description: "Paramètres spécifiques selon le type"
              oneOf:
                - properties: {} # Pause n’a pas besoin de data
                - properties:
                    cap: { type: number }
                    coord:
                      type: array
                      items: { type: number }
                      minItems: 2
                      maxItems: 2
                    duree: { type: number }
                    pitch: { type: number }
                    zoom: { type: number }
                  required: [cap, coord, duree, pitch, zoom]
                  additionalProperties: false
                - properties:
                    text: { type: string }
                    durationIncrements: { type: number }
                    coord:
                      type: array
                      items: { type: number }
                      minItems: 2
                      maxItems: 2
                    color: { type: string }
                  required: [text, durationIncrements, coord, color]
                  additionalProperties: false
additionalProperties: false

